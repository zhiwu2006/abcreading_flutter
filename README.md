# 英语阅读理解学习平台 (Flutter Android 版)

**当前版本**: 0.2.0

这是一个使用 Flutter 构建的功能丰富的英语阅读理解学习平台。它旨在通过提供结构化的课程、互动练习和个性化设置，帮助用户提升英语阅读能力。

## 核心功能

- **分课学习**: 应用内容按课程组织，每课包含一篇阅读文章。
- **多维学习模块**: 每个课程都包含四个主要部分：
  - **故事阅读**: 阅读核心文章，支持词汇点击高亮。
  - **词汇学习**: 学习与文章相关的生词及其释义。
  - **重点句子**: 分析和理解文章中的关键句型和语法。
  - **练习题**: 通过选择题检验对文章的理解程度，并提供实时评分。
- **智能测试系统** (v0.2 新增):
  - **单词测试**: 支持"英语单词→中文释义"和"英语单词→英语释义"两种模式
  - **完形填空**: 智能提取包含学习词汇的句子，生成填空题目
  - **课程选择**: 可选择特定课程范围进行针对性测试
  - **题量灵活**: 支持5、10、15、20、50、100题等多种题量选择
  - **语音朗读**: 集成TTS功能，答题后朗读例句增强记忆
  - **词汇管理**: 滑动标记不熟悉单词，支持专项强化训练
- **个性化阅读体验**:
  - **字体大小调节**: 用户可以根据自己的习惯调整阅读内容的字体大小。
  - **词汇高亮**: 可以一键开启或关闭文章中生词的高亮显示。
- **课程导航**: 提供侧边栏抽屉和主页选择器，方便用户在不同课程间快速切换。
- **离线支持**: 支持在没有网络连接的情况下访问已缓存的课程内容。

## 技术架构

本项目采用现代化的 Flutter 技术栈，并遵循了清晰的分层架构模式，以实现高内聚、低耦合的代码结构。

*   **框架**: [Flutter](https://flutter.dev/)
*   **后端即服务 (BaaS)**: [Supabase](https://supabase.io/) - 用于数据持久化、同步和潜在的用户认证。
*   **状态管理**: [Provider](https://pub.dev/packages/provider) - 用于在整个应用中高效地管理和分发状态。
*   **本地存储**:
    *   [Hive](https://pub.dev/packages/hive) - 一个轻量、快速的键值对数据库，用于缓存课程数据和用户进度，实现离线访问。
    *   [SharedPreferences](https://pub.dev/packages/shared_preferences) - 用于存储用户的个性化设置。
*   **架构模式**: **分层架构 (Clean Architecture)**
    *   `lib/domain`: 包含核心业务逻辑、实体 (Entities) 和仓库接口 (Repository Interfaces)。
    *   `lib/data`: 包含仓库接口的实现、数据源 (本地和远程) 的具体逻辑。
    *   `lib/presentation`: 包含所有的 UI 组件 (页面、小部件) 和与 UI 相关的状态管理 (Providers)。
*   **网络连接**: [Connectivity Plus](https://pub.dev/packages/connectivity_plus) - 用于检测网络状态，以决定是从本地缓存加载数据还是从远程服务器同步。

## 主要依赖

- `supabase_flutter`: 与 Supabase 后端集成。
- `provider`: 状态管理。
- `hive` / `hive_flutter`: 本地数据库。
- `shared_preferences`: 简单的键值存储。
- `connectivity_plus`: 网络状态检测。
- `uuid`: 生成唯一标识符。
- `flutter_tts`: 文本转语音功能。

## 如何开始

1.  **克隆仓库**:
    ```bash
    git clone https://github.com/zhiwu2006/abcreading_flutter.git
    cd flutter_english_learning
    ```

2.  **安装依赖**:
    ```bash
    flutter pub get
    ```

3.  **配置 Supabase (如果需要)**:
    *   在 [Supabase](https://supabase.io/) 创建一个项目。
    *   在 `lib/core/config/supabase_config.dart` (或类似文件) 中填入你的 Supabase URL 和 Anon Key。

4.  **运行应用**:
    ```bash
    flutter run
    ```

## 未来可改进方向

*   **UI 组件拆分**: `lib/main.dart` 文件中的 UI 代码可以被进一步拆分到 `lib/presentation/widgets` 目录中，以提高模块化和可维护性。
*   **用户认证**: 集成完整的 Supabase 用户认证流程（注册、登录、忘记密码）。
*   **主题切换**: 添加暗黑模式/日间模式切换功能。
*   **动画与过渡**: 增加更多平滑的动画效果，提升用户体验。
*   **学习统计**: 添加学习进度跟踪和成绩分析功能。
*   **错题本**: 收集错误答案，提供针对性复习。

## 0.2.0 更新内容

### 阅读体验优化
- 默认字体与字号：使用 Times New Roman，默认字号 24
- 全屏阅读：仅"阅读故事"显示全屏按钮；采用 Sepia 护眼配色
- 滚动联动：词汇学习/重点句子/练习题向上滑隐藏标题栏与 Tab，向下滑显示
- 内容字号统一：三部分主要文字统一为 20 号
- 标点显示修复：严格按数据库 content 原文渲染
- 应用图标：重绘为"书本+声波"主题，多彩渐变背景，已更新 launcher icons

### 全新测试模块
- **单词测试系统**：
  - 支持"英语单词→中文释义"和"英语单词→英语释义"两种测试模式
  - 智能解析词汇释义，准确分离中英文内容
  - 集成TTS语音朗读，答题后自动朗读例句
  - 支持5-100题灵活题量选择
  
- **完形填空测试**：
  - 智能提取包含学习词汇的句子作为题目
  - 自动生成干扰选项，提高测试难度
  - 答题后语音朗读完整句子，加深理解
  
- **词汇管理功能**：
  - 词汇列表页面，支持按课程浏览所有学习词汇
  - 点击展开查看中英文释义
  - 右滑标记不熟悉单词，建立个人词汇库
  - 不熟悉单词专项测试，针对性强化训练
  
- **个性化设置**：
  - 课程范围选择，支持单课程或多课程组合测试
  - 全选/取消全选快捷操作
  - 测试进度实时显示，答题统计一目了然

### 技术改进
- 修复界面溢出问题，优化布局适配
- 统一测试页面样式，提升用户体验
- 完善TTS时序控制，确保语音播放完整
- 优化数据结构，提高测试题目生成效率

## 项目结构

```
lib/
├── core/                    # 核心配置和常量
├── data/                    # 数据层
├── domain/                  # 业务逻辑层
├── models/                  # 数据模型
├── presentation/            # 表现层
│   ├── pages/              # 页面组件
│   │   ├── cloze_test_page.dart           # 完形填空测试
│   │   ├── home_page.dart                 # 主页
│   │   ├── test_page.dart                 # 测试模块首页
│   │   ├── unfamiliar_words_test_page.dart # 不熟悉单词测试
│   │   ├── vocabulary_list_page.dart       # 词汇列表
│   │   └── word_test_page.dart            # 单词测试
│   ├── providers/          # 状态管理
│   ├── themes/             # 主题配置
│   └── widgets/            # 可复用组件
├── providers/              # 全局状态管理
├── services/               # 服务层
└── utils/                  # 工具类
```

## 贡献指南

欢迎提交 Issue 和 Pull Request 来帮助改进这个项目。在提交代码前，请确保：

1. 代码符合 Flutter 编码规范
2. 添加必要的注释和文档
3. 测试新功能的正常运行
4. 更新相关的 README 文档

## 许可证

本项目采用 MIT 许可证。详情请查看 [LICENSE](LICENSE) 文件。